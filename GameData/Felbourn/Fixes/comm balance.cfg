//-------------------------------------------------------------------------------------------------
COMMSAT
{
	// Km antenna
	omni_range = 625,  1250,  2500,  5000
	omni_power = 0.04, 0.156, 0.625, 2.5
	omni_mass = 0.001, 0.002, 0.003, 0.004

	// Mm dish
	close_range = 10,  25,    50,   100
	close_power = 0.1, 0.15,  0.2,  0.3
	close_cone  = 85,  35,    20,   10
	close_mass  = 0.005, 0.015, 0.03, 0.06

	// Gm dish
	far_range = 50,    100,   250
	far_power = 0.6,   1.5,   2.8
	far_cone  = 0.017, 0.009, 0.003
	far_mass = 0.25,   0.5,   1

	cone_power = 10   // times this power if we are designed for cone coverage
	target_cone = 150 // divide cone by this is we are designed for single target
}

//-------------------------------------------------------------------------------------------------
@PART[longAntenna]:AFTER[RemoteTech]
{
	%VARS
	{
		omni = 0
	}
}
@PART[Antennaesc]
{	
	%VARS
	{
		omni = 1
	}
}
@PART[RTLongAntenna3]:AFTER[RemoteTech]
{	
	%VARS
	{
		omni = 2
	}
}
@PART[RTLongAntenna2]:AFTER[RemoteTech]
{
	%VARS
	{
		omni = 3
	}
}

//-------------------------------------------------------------------------------------------------
@PART[AntennaDF2]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 0
		target_dish = true
	}
}
@PART[MKV_CommPak]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 0
	}
}
@PART[Dishcl1]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 0
	}
}
@PART[Antennacomtec1]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 1
	}
}
@PART[mediumDishAntenna]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 1
	}
}
@PART[Dishpcf]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 1
		target_dish = true
	}
}
@PART[Antennacomtec2]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 2
		target_dish = true
	}
}
@PART[RTShortDish2]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 2
	}
}
@PART[Dishmccomu]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 3
	}
}
@PART[Dishomega2g]:AFTER[RemoteTech]
{	
	%VARS
	{
		close_dish = 3
		target_dish = true
	}
}

//-------------------------------------------------------------------------------------------------
@PART[commDish]:AFTER[RemoteTech]
{	
	%VARS
	{
		far_dish = 0
		target_dish = true
	}
}
@PART[dishcomlar1]:AFTER[RemoteTech]
{	
	%VARS
	{
		far_dish = 0
	}
}
@PART[RTLongDish2]:AFTER[RemoteTech]
{
	%VARS
	{
		far_dish = 1
		target_dish = true
	}
}
@PART[RTGigaDish2]:AFTER[RemoteTech]
{
	%VARS
	{
		far_dish = 1
	}
}
@PART[RTGigaDish1]:AFTER[RemoteTech]
{
	%VARS
	{
		far_dish = 2
		target_dish = true
	}
}

//-------------------------------------------------------------------------------------------------
@PART[*]:HAS[@VARS:HAS[#omni[0]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/omni_mass[0]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode0OmniRange = 0
		@Mode1OmniRange = #$@COMMSAT/omni_range[0]$
		@EnergyCost = #$@COMMSAT/omni_power[0]$
	}
}
@PART[*]:HAS[@VARS:HAS[#omni[1]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/omni_mass[1]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode0OmniRange = 0
		@Mode1OmniRange = #$@COMMSAT/omni_range[1]$
		@EnergyCost = #$@COMMSAT/omni_power[1]$
	}
}
@PART[*]:HAS[@VARS:HAS[#omni[2]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/omni_mass[2]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode0OmniRange = 0
		@Mode1OmniRange = #$@COMMSAT/omni_range[2]$
		@EnergyCost = #$@COMMSAT/omni_power[2]$
	}
}

//-------------------------------------------------------------------------------------------------
@PART[*]:HAS[@VARS:HAS[#close_dish[0]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/close_mass[0]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/close_range[0]$
		@EnergyCost = #$@COMMSAT/close_power[0]$
		@DishAngle = #$@COMMSAT/close_cone[0]$
	}
}
@PART[*]:HAS[@VARS:HAS[#close_dish[1]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/close_mass[1]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/close_range[1]$
		@EnergyCost = #$@COMMSAT/close_power[1]$
		@DishAngle = #$@COMMSAT/close_cone[1]$
	}
}
@PART[*]:HAS[@VARS:HAS[#close_dish[2]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/close_mass[2]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/close_range[2]$
		@EnergyCost = #$@COMMSAT/close_power[2]$
		@DishAngle = #$@COMMSAT/close_cone[2]$
	}
}
@PART[*]:HAS[@VARS:HAS[#close_dish[3]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/close_mass[3]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/close_range[3]$
		@EnergyCost = #$@COMMSAT/close_power[3]$
		@DishAngle = #$@COMMSAT/close_cone[3]$
	}
}

//-------------------------------------------------------------------------------------------------
@PART[*]:HAS[@VARS:HAS[#far_dish[0]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/far_mass[0]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/far_range[0]$
		@EnergyCost = #$@COMMSAT/far_power[0]$
		@DishAngle = #$@COMMSAT/far_cone[0]$
	}
}
@PART[*]:HAS[@VARS:HAS[#far_dish[1]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/far_mass[1]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/far_range[1]$
		@EnergyCost = #$@COMMSAT/far_power[1]$
		@DishAngle = #$@COMMSAT/far_cone[1]$
	}
}
@PART[*]:HAS[@VARS:HAS[#far_dish[2]]]:AFTER[RemoteTech]
{	
	%ACTIONS
	{
		action = set comm balance
	}
	@mass = #$@COMMSAT/far_mass[2]$
	@MODULE[ModuleRTAntenna]
	{
		@Mode1DishRange = #$@COMMSAT/far_range[2]$
		@EnergyCost = #$@COMMSAT/far_power[2]$
		@DishAngle = #$@COMMSAT/far_cone[2]$
	}
}

//-------------------------------------------------------------------------------------------------
@PART[*]:HAS[@VARS:HAS[#target_dish[true]]]:AFTER[RemoteTech]
{
	%ACTIONS
	{
		action = target-dish has less angle
	}
	@MODULE[ModuleRTAntenna]
	{
		@DishAngle /= #$@COMMSAT/target_cone$
	}	
}
@PART[*]:HAS[@VARS:HAS[~target_dish[true]]]:AFTER[RemoteTech]
{
	%ACTIONS
	{
		action = cone-dish costs more power
	}
	@MODULE[ModuleRTAntenna]
	{
		@EnergyCost *= #$@COMMSAT/cone_power$
	}	
}

@PART[*]:HAS[@MODULE[ModuleRTAntennaPassive]:HAS[#OmniRange[3000]]]:AFTER[RemoteTech]
{
	%ACTIONS
	{
		action = increase communications perk range
	}
	@MODULE[ModuleRTAntennaPassive]
	{
		@OmniRange = 300000
	}
}
